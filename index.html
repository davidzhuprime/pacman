<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Extravagant Animated LaTeX</title>
	<style>
		body {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			margin: 0;
			background-color: #f0f0f0;
			overflow: hidden;
		}

		img {
			position: absolute;
			will-change: transform;
		}
	</style>
</head>
<body>
<img class="latexImage" src="max.png" alt="LaTeX equation" />
<audio id="audio" src="s.mp3" controls></audio>
<script>
	document.addEventListener('DOMContentLoaded', () => {
		const audio = document.getElementById('audio');
		const latexImages = document.getElementsByClassName('latexImage');

		const audioContext = new (window.AudioContext || window.webkitAudioContext)();
		const audioSourceNode = audioContext.createMediaElementSource(audio);
		const analyser = audioContext.createAnalyser();

		audioSourceNode.connect(analyser);
		analyser.connect(audioContext.destination);

		analyser.fftSize = 128;
		const bufferLength = analyser.frequencyBinCount;
		const dataArray = new Uint8Array(bufferLength);

		function updateSize() {
			analyser.getByteFrequencyData(dataArray);
			let maxFreq = Math.max.apply(null, dataArray);

			const scaleFactor = 1 + maxFreq / 255;

			for (let i = 0; i < latexImages.length; i++) {
				const image = latexImages[i];
				const rotation = (360 / latexImages.length) * i;
				const xPos = (i + 1) * 40 * scaleFactor;
				const yPos = (i + 1) * 20 * scaleFactor;
				image.style.transform = `translate(${xPos}px, ${yPos}px) rotate(${rotation * scaleFactor}deg) scale(${scaleFactor})`;
			}

			requestAnimationFrame(updateSize);
		}

		audio.onplay = () => {
			requestAnimationFrame(updateSize);
		};
	});
</script>
</body>
</html>
